#include <stdio.h>

class X; // X is an incomplete type
extern X* xp; // xp is a pointer to an incomplete type
extern int arr[]; // the type of arr is incomplete
typedef int UNKA[]; // UNKA is an incomplete type
UNKA* arrp; // arrp is a pointer to an incomplete type
UNKA** arrpp;
void foo()
{
  arrpp++; //OK: sizeof UNKA* is known
}
struct X { int i; }; // now X is a complete type
int arr[10]; // now the type of arr is complete
X x;
void bar()
{
  xp = &x; // OK; type is ``pointer to X''
  xp++;    //OK: X is complete
}

int main()
{
  UNKA** p = arrpp;
  foo();
  UNKA** q = arrpp;
  if ( q - p == 1 )
    printf("ok\n");
  else
    printf("error\n");
  bar();
  if ( xp - &x == 1 )
    printf("ok\n");
  else
    printf("error\n");
  return 0;
}

X* xp;
